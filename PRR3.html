<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Пиксельный Петух — Финальная Верстка</title>
  <style>
    @font-face {
      font-family: 'Urbox Nu Std 12';
      src: url('urboxnustd12extended.otf') format('opentype');
      font-display: swap;
    }
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #E8E2DE;
      font-family: 'Urbox Nu Std 12', sans-serif;
      overflow: hidden;
      user-select: none;
    }
    canvas {
      background: #E8E2DE;
      border: 3px solid #070606;
      image-rendering: pixelated;
      cursor: pointer;
    }
  </style>
</head>
<body>
<canvas id="game" width="800" height="260"></canvas>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const ROAD_Y = 210;
const PADDING = 20; // Единый отступ для всех элементов интерфейса
let gameSpeed = 6;
let score = 0;
let lives = 3;
let gameOver = false;
let frameCount = 0;
let nextSpawn = 15; 
let invulFrames = 0;

// Ваш логотип
const logoSVG = `<svg width="760" height="113" viewBox="0 0 760 113" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M46.9131 56.2959H46.9141V37.5312H65.6787V56.2959H84.4443V37.5312H121.976V56.2959H112.593V75.0615H56.2969V56.2959H56.2959V75.0615H46.9131V93.8271H37.5312V112.593H0V93.8271H9.38281V75.0615H18.7656V56.2959H28.1484V37.5312H46.9131V56.2959ZM178.271 56.2959H197.037V37.5312H234.567V56.2959H225.186V75.0615H159.506V93.8271H206.42V112.593H150.124V93.8271H150.123V112.593H131.358V93.8271H121.976V75.0615H131.358V56.2959H140.741V37.5312H178.271V56.2959ZM290.864 56.2959H281.481V75.0615H272.099V93.8271H262.716V112.593H243.951V93.8271H243.95V112.593H225.186V93.8271H234.568V75.0615H243.951V56.2959H253.334V37.5312H290.864V56.2959ZM328.395 56.2959H328.396V37.5312H347.161V56.2959H337.778V75.0615H328.395V93.8271H319.012V112.593H281.481V93.8271H290.864V75.0615H300.247V56.2959H309.63V37.5312H328.395V56.2959ZM459.753 56.2959H450.37V75.0615H440.988V93.8271H431.605V112.593H394.074V93.8271H403.457V75.0615H412.84V56.2959H422.223V37.5312H459.753V56.2959ZM516.049 56.2959H525.432V75.0615H497.284V93.8271H525.432V112.593H469.137V93.8271H459.754V75.0615H469.137V56.2959H478.519V37.5312H516.049V56.2959ZM544.197 112.593H525.433V93.8271H544.197V112.593ZM609.876 56.2959H609.877V37.5312H628.643V56.2959H619.26V75.0615H609.876V93.8271H600.493V112.593H562.963V93.8271H572.346V75.0615H581.729V56.2959H591.111V37.5312H609.876V56.2959ZM684.938 56.2959H675.556V75.0615H666.173V93.8271H656.79V112.593H638.025V93.8271H638.024V112.593H619.26V93.8271H628.643V75.0615H638.025V56.2959H647.407V37.5312H684.938V56.2959ZM722.469 56.2959H722.47V37.5312H741.235V56.2959H731.852V75.0615H722.469V93.8271H713.087V112.593H675.556V93.8271H684.938V75.0615H694.321V56.2959H703.704V37.5312H722.469V56.2959ZM140.74 93.8271H140.741V75.0615H140.74V93.8271ZM253.333 93.8271H253.334V75.0615H253.333V93.8271ZM150.123 75.0615H150.124V56.2959H150.123V75.0615ZM262.716 75.0615H262.717V56.2959H262.716V75.0615ZM319.012 75.0615H319.013V56.2959H319.012V75.0615ZM403.457 56.2959H394.074V75.0615H356.543V56.2959H365.926V37.5312H403.457V56.2959ZM553.58 37.5312H553.581H572.346V56.2959H562.963V75.0615H544.198V56.2959H544.197V75.0615H525.433V56.2959H534.815V37.5312H553.58ZM600.493 75.0615H600.494V56.2959H600.493V75.0615ZM65.6787 18.7656H65.6797V0H121.976V18.7656H131.358V37.5303H93.8271V18.7656H75.0615V37.5303H56.2969V18.7656H56.2959V37.5303H37.5312V18.7656H46.9141V0H65.6787V18.7656ZM178.271 18.7656H178.272V0H234.567V18.7656H243.95V37.5303H206.42V18.7656H187.654V37.5303H150.124V18.7656H159.506V0H178.271V18.7656ZM309.63 18.7656H300.247V37.5303H262.717V18.7656H272.099V0H309.63V18.7656ZM365.926 18.7656H384.691V0H422.223V18.7656H440.987V0H459.753V18.7656H459.754V0H478.519V18.7656H469.136V37.5303H319.013V18.7656H328.396V0H365.926V18.7656ZM516.049 18.7656H516.05V0H534.814V18.7656H525.432V37.5303H487.901V18.7656H497.284V0H516.049V18.7656ZM572.346 18.7656H581.729V37.5303H544.198V18.7656H534.815V0H553.58V18.7656H553.581V0H572.346V18.7656ZM684.938 18.7656H694.321V37.5303H656.79V18.7656H638.024V37.5303H600.494V18.7656H609.877V0H684.938V18.7656ZM760 18.7656H722.47V0H760V18.7656Z" fill="#A5221D"/></svg>`;

const logo = new Image();
logo.src = 'data:image/svg+xml;base64,' + btoa(logoSVG);

// Иконка сердца
const heartSVG = `<svg width="20" height="20" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M2 1H4V2H6V1H8V2H9V5H8V6H7V7H6V8H4V7H3V6H2V5H1V2H2V1Z" fill="#A5221D"/></svg>`;
const heartImg = new Image();
heartImg.src = 'data:image/svg+xml;base64,' + btoa(heartSVG);

const rooster = {
  x: 80, y: ROAD_Y, vy: 0, gravity: 0.7, jumpPower: -13, onGround: true, width: 40, height: 36, frame: 0, frameTimer: 0
};

const roosterImg = new Image();
roosterImg.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="225" height="200" viewBox="0 0 225 200"><path d="M125 200.002H150V187.502H125V200.002ZM87.5 187.502V200.002H112.5V187.502H87.5ZM112.5 187.502H125V175.002H112.5V187.502ZM187.5 0.000976562H175V12.501H187.5V25.001H162.5V37.501H150V25.001H137.5V50.001H162.5V62.501H137.5V75.001H100V87.501H87.5V50.0029H75V62.5H62.5V75H75V75.002H50V62.5029H37.5V87.5029H50V100.001H62.5V100.002H50V125.002H62.5V137.502H75V150.002H87.5V162.502H100V175.002H112.5V162.502H150V150.002H175V137.502H187.5V75.001H200V87.501H212.5V62.501H225V50.001H212.5V37.501H200V25.001H212.5V12.501H200V0L187.5 0.000976562ZM12.5 87.5029H25V62.5029H37.5V50.0029H12.5V87.5029ZM200 62.501H187.5V50.001H200V62.501ZM50 62.5H62.5V50H50V62.5ZM62.5 50H75V37.5H62.5V50ZM12.5 25H25V25.002H37.5V37.5H25V50H50V37.5H62.5V25H50V12.502H25V12.5H12.5V25ZM0 37.5H12.5V25H0V37.5ZM150 25H175V12.5H150V25Z" fill="%23A5221D"/></svg>';

const obstacles = [];

function spawnObstacle() {
  if (frameCount >= nextSpawn) {
    const h = 35 + Math.random() * 25;
    obstacles.push({
      x: canvas.width, y: ROAD_Y, w: 15, h,
      spots: Array.from({ length: 4 }, () => ({ ry: Math.random() * 0.8, rw: 0.5, side: Math.random() > 0.5 ? 'left' : 'right' }))
    });
    const interval = Math.max(25, 55 - (gameSpeed * 1.5));
    nextSpawn = frameCount + interval + Math.random() * 35;
  }
}

function update() {
  if (gameOver) return;
  frameCount++;
  if (invulFrames > 0) invulFrames--;
  
  gameSpeed = 6 + (score * 0.16);

  rooster.vy += rooster.gravity;
  rooster.y += rooster.vy;
  if (rooster.y >= ROAD_Y) { rooster.y = ROAD_Y; rooster.vy = 0; rooster.onGround = true; }

  spawnObstacle();
  for (let i = obstacles.length - 1; i >= 0; i--) {
    obstacles[i].x -= gameSpeed;
    const o = obstacles[i];
    if (invulFrames === 0 && rooster.x + 8 < o.x + o.w && rooster.x + rooster.width - 8 > o.x &&
        rooster.y - rooster.height + 8 < o.y && rooster.y > o.y - o.h) {
      lives--;
      invulFrames = 80;
      if (lives <= 0) gameOver = true;
    }
    if (o.x + o.w < 0) { obstacles.splice(i, 1); score++; }
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  ctx.strokeStyle = '#070606';
  ctx.lineWidth = 2;
  ctx.beginPath(); ctx.moveTo(0, ROAD_Y); ctx.lineTo(canvas.width, ROAD_Y); ctx.stroke();

  obstacles.forEach(o => {
    ctx.fillStyle = '#FFFFFF';
    ctx.fillRect(o.x, o.y - o.h, o.w, o.h);
    ctx.strokeRect(o.x, o.y - o.h, o.w, o.h);
    ctx.fillStyle = '#070606';
    o.spots.forEach(s => ctx.fillRect(s.side === 'left' ? o.x : o.x+o.w-o.w*s.rw, o.y-o.h+(o.h*s.ry), o.w*s.rw, 2));
  });

  if (invulFrames === 0 || Math.floor(frameCount / 5) % 2 === 0) {
    rooster.frameTimer++;
    if (rooster.frameTimer > 10) { rooster.frame = (rooster.frame + 1) % 2; rooster.frameTimer = 0; }
    const bounce = (rooster.onGround && !gameOver) ? rooster.frame * 3 : 0;
    ctx.drawImage(roosterImg, rooster.x, rooster.y - rooster.height + bounce, rooster.width, rooster.height);
  }

  // Текст СЧЕТ (отступ слева и сверху 20px)
  const fontSize = 28;
  ctx.fillStyle = '#070606';
  ctx.font = `${fontSize}px "Urbox Nu Std 12", sans-serif`;
  ctx.textAlign = 'left';
  ctx.fillText(`СЧЁТ: ${score}`, PADDING, PADDING + fontSize);

  // ЛОГОТИП (Правый верхний угол, отступы PADDING)
  const logH = fontSize; // Масштабируем по размеру шрифта
  const logW = (logo.width / logo.height) * logH;
  ctx.drawImage(logo, canvas.width - logW - PADDING, PADDING, logW, logH);

  // Жизни (Правый нижний угол)
  for (let i = 0; i < lives; i++) {
    ctx.drawImage(heartImg, canvas.width - 40 - (i * 30), canvas.height - 40, 24, 24);
  }

  if (gameOver) {
    ctx.fillStyle = 'rgba(232, 226, 222, 0.9)';
    ctx.fillRect(0,0, canvas.width, canvas.height);
    ctx.fillStyle = '#A5221D';
    ctx.textAlign = 'center';
    ctx.font = '40px "Urbox Nu Std 12", sans-serif';
    ctx.fillText('ИГРА ОКОНЧЕНА', canvas.width/2, canvas.height/2);
    ctx.font = '20px "Urbox Nu Std 12", sans-serif';
    ctx.fillText('КЛИКНИ ДЛЯ РЕСТАРТА', canvas.width/2, canvas.height/2 + 40);
  }

  requestAnimationFrame(draw);
}

function action() {
  if (gameOver) {
    obstacles.length = 0; score = 0; lives = 3; gameOver = false; gameSpeed = 6; frameCount = 0; nextSpawn = 15; invulFrames = 0;
  } else if (rooster.onGround) {
    rooster.vy = rooster.jumpPower; rooster.onGround = false;
  }
}

document.fonts.ready.then(() => {
  canvas.addEventListener('mousedown', action);
  window.addEventListener('keydown', e => { if(e.code === 'Space') action(); });
  setInterval(update, 1000/60);
  draw();
});
</script>
</body>
</html>